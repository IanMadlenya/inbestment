{% extends 'base.html' %}
{% block body %}

	<h3> Priorities: </h3>
	<p> Checking Account: {{checking}} </p>
	<p> Savings Account: {{savings}} </p>
	<p> 401k Match: {{match}} </p>
	<p> IRA: {{ira}} </p>
	<p> 401k Account: {{ret401k}} </p>
	<p> Brokerage Account: {{investment}} </p>
	
	<div class="checkingaccount" style="width:500px; height:300px; display: inline-block"> 
	</div>
	<div class="savingsaccount" style="width:500px; height:300px; display: inline-block">
	</div> 
	<div class="matchaccount" style="width:500px; height:300px; display: inline-block"> 
	</div> 
	<div class="iraaccount" style="width:500px; height:300px; display: inline-block"> 
	</div> 
	<div class="ret401kaccount" style="width:500px; height:300px; display: inline-block"> 
	</div> 
	<div class="investmentaccount" style="width:500px; height:300px; display: inline-block"> 
	</div>

	<script>
	var results = {{results|safe}};
	account = Object.keys(results);
	value = account.map(function(key){
		return results[key];
	});
	var max_results = {{max_results|safe}};
	max_account = Object.keys(max_results);
	max_value = max_account.map(function(key){
		return max_results[key];
	});

	Highcharts.setOptions({
		lang: {
			thousandsSep: ","
		}
	});
	
	$(function () {
	    $('.checkingaccount').highcharts({
	        chart: {
	            plotBackgroundColor: null,
	            plotBorderWidth: 0,
	            plotShadow: false
	        },
	        title: {
	            text: 'Checking<br>Account',
	            align: 'center',
	            verticalAlign: 'middle',
	            y: 50
	        },
	        credits: {
	            enabled: false
	        },
	        tooltip: {
	            pointFormat: '{series.name}: <b>${point.y:,.2f}</b>'
	        },
	        plotOptions: {
	            pie: {
	                dataLabels: {
	                    enabled: true,
	                    distance: -50,
	                    style: {
	                        fontWeight: 'bold',
	                        color: 'white',
	                        textShadow: '0px 1px 2px black'
	                    }
	                },
	                startAngle: -90,
	                endAngle: 90,
	                center: ['50%', '75%']
	            }
	        },
	        series: [{
	            type: 'pie',
	            name: 'Value',
	            innerSize: '50%',
	            data: [
	                ['Amount Funded', results["checking"]],
	                ['Amount Needed', max_results["checking"] - results["checking"]],
	                ]
	        }]
	    });
	});

	$(function () {
	    $('.savingsaccount').highcharts({
	        chart: {
	            plotBackgroundColor: null,
	            plotBorderWidth: 0,
	            plotShadow: false
	        },
	        title: {
	            text: 'Savings<br>Account',
	            align: 'center',
	            verticalAlign: 'middle',
	            y: 50
	        },
	        credits: {
	            enabled: false
	        },
	        tooltip: {
	            pointFormat: '{series.name}: <b>${point.y:,.2f}</b>'
	        },
	        plotOptions: {
	            pie: {
	                dataLabels: {
	                    enabled: true,
	                    distance: -50,
	                    style: {
	                        fontWeight: 'bold',
	                        color: 'white',
	                        textShadow: '0px 1px 2px black'
	                    }
	                },
	                startAngle: -90,
	                endAngle: 90,
	                center: ['50%', '75%']
	            }
	        },
	        series: [{
	            type: 'pie',
	            name: 'Value',
	            innerSize: '50%',
	            data: [
	                ['Amount Funded', results["savings"]],
	                ['Amount Needed', max_results["savings"] - results["savings"]],
	            ]
	        }]
	    });
	});

	$(function () {
	    $('.matchaccount').highcharts({
	        chart: {
	            plotBackgroundColor: null,
	            plotBorderWidth: 0,
	            plotShadow: false
	        },
	        title: {
	            text: '401K Match',
	            align: 'center',
	            verticalAlign: 'middle',
	            y: 50
	        },
	        credits: {
	            enabled: false
	        },
	        tooltip: {
	            pointFormat: '{series.name}: <b>${point.y:,.2f}</b>'
	        },
	        plotOptions: {
	            pie: {
	                dataLabels: {
	                    enabled: true,
	                    distance: -50,
	                    style: {
	                        fontWeight: 'bold',
	                        color: 'white',
	                        textShadow: '0px 1px 2px black'
	                    }
	                },
	                startAngle: -90,
	                endAngle: 90,
	                center: ['50%', '75%']
	            }
	        },
	        series: [{
	            type: 'pie',
	            name: 'Value',
	            innerSize: '50%',
	            data: [
	                ['Amount Funded', results["match"]],
	                ['Amount Needed', max_results["match"] - results["match"]],
	            ]
	        }]
	    });
	});

	$(function () {
	    $('.iraaccount').highcharts({
	        chart: {
	            plotBackgroundColor: null,
	            plotBorderWidth: 0,
	            plotShadow: false
	        },
	        title: {
	            text: 'IRA',
	            align: 'center',
	            verticalAlign: 'middle',
	            y: 50
	        },
	        credits: {
	            enabled: false
	        },
	        tooltip: {
	            pointFormat: '{series.name}: <b>${point.y:,.2f}</b>'
	        },
	        plotOptions: {
	            pie: {
	                dataLabels: {
	                    enabled: true,
	                    distance: -50,
	                    style: {
	                        fontWeight: 'bold',
	                        color: 'white',
	                        textShadow: '0px 1px 2px black'
	                    }
	                },
	                startAngle: -90,
	                endAngle: 90,
	                center: ['50%', '75%']
	            }
	        },
	        series: [{
	            type: 'pie',
	            name: 'Value',
	            innerSize: '50%',
	            data: [
	                ['Amount Funded', results["ira"]],
	                ['Amount Needed', max_results["ira"] - results["ira"]],
	            ]
	        }]
	    });
	});
	
	$(function () {
	    $('.ret401kaccount').highcharts({
	        chart: {
	            plotBackgroundColor: null,
	            plotBorderWidth: 0,
	            plotShadow: false
	        },
	        title: {
	            text: '401K<br>Account',
	            align: 'center',
	            verticalAlign: 'middle',
	            y: 50
	        },
	        credits: {
	            enabled: false
	        },
	        tooltip: {
	            pointFormat: '{series.name}: <b>${point.y:,.2f}</b>'
	        },
	        plotOptions: {
	            pie: {
	                dataLabels: {
	                    enabled: true,
	                    distance: -50,
	                    style: {
	                        fontWeight: 'bold',
	                        color: 'white',
	                        textShadow: '0px 1px 2px black'
	                    }
	                },
	                startAngle: -90,
	                endAngle: 90,
	                center: ['50%', '75%']
	            }
	        },
	        series: [{
	            type: 'pie',
	            name: 'Value',
	            innerSize: '50%',
	            data: [
	                ['Amount Funded', results["ret401k"]],
	                ['Amount Needed', max_results["ret401k"] - results["ret401k"]],
	            ]
	        }]
	    });
	});
	
	$(function () {
	    $('.investmentaccount').highcharts({
	        chart: {
	            plotBackgroundColor: null,
	            plotBorderWidth: 0,
	            plotShadow: false
	        },
	        title: {
	            text: 'Brokerage<br>Account',
	            align: 'center',
	            verticalAlign: 'middle',
	            y: 50
	        },
	        credits: {
	            enabled: false
	        },
	        tooltip: {
	            pointFormat: '{series.name}: <b>${point.y:,.2f}</b>'
	        },
	        plotOptions: {
	            pie: {
	                dataLabels: {
	                    enabled: true,
	                    distance: -50,
	                    style: {
	                        fontWeight: 'bold',
	                        color: 'white',
	                        textShadow: '0px 1px 2px black'
	                    }
	                },
	                startAngle: -90,
	                endAngle: 90,
	                center: ['50%', '75%']
	            }
	        },
	        series: [{
	            type: 'pie',
	            name: 'Value',
	            innerSize: '50%',
	            data: [
	                ['Amount Funded', results["investment"]],
	                ['Amount Needed', max_results["investment"] - results["investment"]],
	            ]
	        }]
	    });
	});
	</script>
	<br>

	<form action="/investments">
		<button type="submit"> Show me my investments </button>
	</form> 

	<form action="/profile">
		<button type="submit"> Let me look at my profile again </button>
	</form> 
    
{% endblock %}

